apiVersion: monitoring.coreos.com/v1
kind: PrometheusRule
metadata:
  name: hcp-kms-recording-rules
  namespace: prometheus
spec:
  groups:
  - name: hcp-kms-recording-rules
    rules:
    - record: kube_customresource_kubeapiserver_available:ratio_avg_30d
      expr: avg_over_time(kube_customresource_kubeapiserver_available{status="True"}[30d])
    - record: kube_customresource_kubeapiserver_available:ratio_avg_7d
      expr: avg_over_time(kube_customresource_kubeapiserver_available{status="True"}[7d])
    - record: kube_customresource_kubeapiserver_available:ratio_avg_1d
      expr: avg_over_time(kube_customresource_kubeapiserver_available{status="True"}[1d])
    - record: kube_customresource_kubeapiserver_available:ratio_avg_3d
      expr: avg_over_time(kube_customresource_kubeapiserver_available{status="True"}[3d])
