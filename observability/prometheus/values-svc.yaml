crds:
  enabled: true
kube-prometheus-stack:
  fullnameOverride: "prometheus"
  global:
    rbac:
      create: true
  alertmanager:
    enabled: false # Disabled for now.
  grafana:
    enabled: false
  # Azure Managed Prometheus will scrape or expose these metrics
  coreDns:
    enabled: false
  kubeDns:
    enabled: false
  nodeExporter:
    enabled: false
  kubeEtcd:
    enabled: false
  kubeScheduler:
    enabled: false
  kubeControllerManager:
    enabled: false
  kubeProxy:
    enabled: false
  kubelet:
    enabled: false
  kubeApiServer:
    enabled: false
  kubeStateMetrics:
    enabled: true # OSS prometheus scrapes kube-state-metrics so the HCP ksm are routed to the hcp Azure Monitor Workspace
  prometheus:
    enabled: false # Prometheus is deployed using templates/prometheus.yaml
  prometheusOperator:
    enabled: true
    fullnameOverride: ""
    image:
      registry: "{{ .svc.prometheus.prometheusOperator.image.registry }}"
      repository: "{{ .svc.prometheus.prometheusOperator.image.repository }}"
      sha: "{{ .svc.prometheus.prometheusOperator.image.sha }}"
    prometheusConfigReloader:
      image:
        registry: "{{ .svc.prometheus.prometheusConfigReloader.image.registry }}"
        repository: "{{ .svc.prometheus.prometheusConfigReloader.image.repository }}"
        sha: "{{ .svc.prometheus.prometheusConfigReloader.image.sha }}"
  ## Setting to true produces cleaner resource names, but requires a data migration because the name of the persistent volume changes. Therefore this should only be set once on initial installation.
  cleanPrometheusOperatorObjectNames: true
prometheusSpec:
  image:
    registry: "{{ .svc.prometheus.prometheusSpec.image.registry }}"
    repository: "{{ .svc.prometheus.prometheusSpec.image.repository }}"
    sha: "{{ .svc.prometheus.prometheusSpec.image.sha }}"
  version: "{{ .svc.prometheus.prometheusSpec.version }}"
  externalLabels:
    cluster: "{{ .svc.aks.name }}"
  remoteWriteUrl: "__dcrRemoteWriteUrl__"
  hcpRemoteWriteUrl: "__hcpDcrRemoteWriteUrl__"
  zoneCount: {{ .azureRegionAvailabilityZoneCount }}
  maximumStartupDurationSeconds: 360
prometheus:
  prometheusSpec:
    shards: {{ .svc.prometheus.prometheusSpec.shards }}
    replicas: {{ .svc.prometheus.prometheusSpec.replicas }}
  serviceAccount:
    managedIdentity: "__prometheusUAMIClientId__"
environment: "{{ .clustersService.environment }}"
