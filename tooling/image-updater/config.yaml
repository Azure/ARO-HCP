images:
  # Maestro image
  maestro:
    source:
      image: quay.io/redhat-user-workloads/maestro-rhtap-tenant/maestro/maestro
      tagPattern: "^[a-f0-9]{40}$"
    targets:
    - jsonPath: defaults.maestro.image.digest
      filePath: ../../config/config.yaml
  # Maestro Agent Sidecar image
  maestro-agent-sidecar:
    source:
      image: mcr.microsoft.com/azurelinux/base/nginx
      tagPattern: "^\\d+\\.\\d+\\.\\d+-\\d+-azl\\d+\\.\\d+\\.\\d+$"
      multiArch: true
    targets:
    - jsonPath: defaults.maestro.agent.sidecar.image.digest
      filePath: ../../config/config.yaml
  # Hypershift image
  hypershift:
    source:
      image: quay.io/redhat-services-prod/crt-redhat-acm-tenant/hypershift/hypershift-operator
      tag: "latest"
      multiArch: true # Use multi-arch manifest
      useAuth: true
      keyVault:
        url: "https://arohcpdev-global.vault.azure.net/"
        secretName: "component-sync-pull-secret"
    targets:
    - jsonPath: defaults.hypershift.image.digest
      filePath: ../../config/config.yaml
  # PKO imagess
  pko-package:
    source:
      image: quay.io/package-operator/package-operator-package
      # tagPattern: "^v\\d+\\.\\d+\\.\\d+$"
      tag: "v1.18.3" # Current image is failing, we needed to rollback
    targets:
    - jsonPath: defaults.pko.imagePackage.digest
      filePath: ../../config/config.yaml
  pko-manager:
    source:
      image: quay.io/package-operator/package-operator-manager
      # tagPattern: "^v\\d+\\.\\d+\\.\\d+$"
      tag: "v1.18.3" # Current image is failing, we needed to rollback
    targets:
    - jsonPath: defaults.pko.imageManager.digest
      filePath: ../../config/config.yaml
  pko-remote-phase-manager:
    source:
      image: quay.io/package-operator/remote-phase-manager
      # tagPattern: "^v\\d+\\.\\d+\\.\\d+$"
      tag: "v1.18.3" # Current image is failing, we needed to rollback
    targets:
    - jsonPath: defaults.pko.remotePhaseManager.digest
      filePath: ../../config/config.yaml
  # Clusters Service image
  clusters-service:
    source:
      image: quay.io/app-sre/aro-hcp-clusters-service
      tag: "latest"
      versionLabel: "vcs-ref"
      useAuth: true
      keyVault:
        url: "https://arohcpdev-global.vault.azure.net/"
        secretName: "component-sync-pull-secret"
    targets:
    - jsonPath: defaults.clustersService.image.digest
      filePath: ../../config/config.yaml
  # Frontend and Backend images
  arohcpfrontend:
    source:
      image: arohcpsvcdev.azurecr.io/arohcpfrontend
      useAuth: true
    targets:
    - jsonPath: defaults.frontend.image.digest
      filePath: ../../config/config.yaml
  arohcpbackend:
    source:
      image: arohcpsvcdev.azurecr.io/arohcpbackend
      useAuth: true
    targets:
    - jsonPath: defaults.backend.image.digest
      filePath: ../../config/config.yaml
  # backplaneAPI
  backplaneAPI:
    source:
      image: quay.io/app-sre/backplane-api
      tagPattern: "^[a-f0-9]{7}$"
      useAuth: true
      keyVault:
        url: "https://arohcpdev-global.vault.azure.net/"
        secretName: "component-sync-pull-secret"
    targets:
    - jsonPath: defaults.backplaneAPI.image.digest
      filePath: ../../config/config.yaml
  # Kube Events image
  kubeEvents:
    source:
      image: kubernetesshared.azurecr.io/shared/kube-events
      tagPattern: "^\\d+\\.\\d+$"
    targets:
    - jsonPath: defaults.kubeEvents.image.digest
      filePath: ../../config/config.yaml
  # ACM images
  acm-operator:
    source:
      image: quay.io/redhat-user-workloads/crt-redhat-acm-tenant/acm-operator-bundle-acm-215
      tagPattern: "^v\\d+\\.\\d+\\.\\d+-\\d+$"
    targets:
    - jsonPath: defaults.acm.operator.bundle.digest
      filePath: ../../config/config.yaml
  acm-mce:
    source:
      image: quay.io/redhat-user-workloads/crt-redhat-acm-tenant/mce-operator-bundle-mce-210
      tagPattern: "^v\\d+\\.\\d+\\.\\d+-\\d+$"
    targets:
    - jsonPath: defaults.acm.mce.bundle.digest
      filePath: ../../config/config.yaml
  # AKS Runtime Image
  aksCommandRuntime:
    source:
      image: mcr.microsoft.com/aks/command/runtime
      tagPattern: "^master\\.\\d+\\.\\d+$"
      multiArch: true
    targets:
    - jsonPath: defaults.aksCommandRuntime.image.digest
      filePath: ../../config/config.yaml
  # MSI-Acrpull image
  acrPull:
    source:
      image: mcr.microsoft.com/aks/msi-acrpull
      tagPattern: "^v\\d+\\.\\d+\\.\\d+$"
    targets:
    - jsonPath: defaults.acrPull.image.digest
      filePath: ../../config/config.yaml
  # Arobit images
  arobit-forwarder:
    source:
      image: mcr.microsoft.com/oss/v2/fluent/fluent-bit
      tagPattern: "^v\\d+\\.\\d+\\.\\d+(-\\d+)?$"
      multiArch: true # This image only publishes multi-arch manifests
    targets:
    - jsonPath: defaults.arobit.forwarder.image.digest
      filePath: ../../config/config.yaml
  arobit-mdsd:
    source:
      image: mcr.microsoft.com/geneva/distroless/mdsd
      tagPattern: "^\\d+\\.\\d+\\.\\d+-\\d+-\\d+$"
      multiArch: true # This image only publishes multi-arch manifests
    targets:
    - jsonPath: defaults.arobit.mdsd.image.digest
      filePath: ../../config/config.yaml
  # Secret Sync Controller image
  secretSyncController:
    source:
      image: registry.k8s.io/secrets-store-sync/controller
      tagPattern: "^v\\d+\\.\\d+\\.\\d+$"
      multiArch: true # This image only publishes multi-arch manifests
    targets:
    - jsonPath: defaults.secretSyncController.image.digest
      filePath: ../../config/config.yaml
  # Secret Sync Azure Provider
  secretSyncProvider:
    source:
      image: mcr.microsoft.com/oss/v2/azure/secrets-store/provider-azure
      tagPattern: "^v\\d+\\.\\d+\\.\\d+(-\\d+)?$"
      multiArch: true
    targets:
    - jsonPath: defaults.secretSyncController.providerImage.digest
      filePath: ../../config/config.yaml
  # Image Sync
  imageSync:
    source:
      image: arohcpsvcdev.azurecr.io/image-sync/oc-mirror
      tagPattern: "^[a-f0-9]{7}$"
      useAuth: true
    targets:
    - jsonPath: defaults.imageSync.ocMirror.image.digest
      filePath: ../../config/config.yaml
  # Prometheus images
  prometheus-operator:
    source:
      image: mcr.microsoft.com/oss/v2/prometheus/prometheus-operator
      tagPattern: "^v\\d+\\.\\d+\\.\\d+-?\\d?$"
      multiArch: true # This image only publishes multi-arch manifests
    targets:
    - jsonPath: defaults.svc.prometheus.prometheusOperator.image.sha
      filePath: ../../config/config.yaml
    - jsonPath: defaults.mgmt.prometheus.prometheusOperator.image.sha
      filePath: ../../config/config.yaml
  prometheus:
    source:
      image: mcr.microsoft.com/oss/v2/prometheus/prometheus
      tagPattern: "^v\\d+\\.\\d+\\.\\d+-?\\d?$"
      multiArch: true # This image only publishes multi-arch manifests
    targets:
    - jsonPath: defaults.svc.prometheus.prometheusSpec.image.sha
      filePath: ../../config/config.yaml
    - jsonPath: defaults.mgmt.prometheus.prometheusSpec.image.sha
      filePath: ../../config/config.yaml
  prometheus-config-reloader:
    source:
      image: mcr.microsoft.com/oss/v2/prometheus/prometheus-config-reloader
      tagPattern: "^v\\d+\\.\\d+\\.\\d+-?\\d?$"
      multiArch: true # This image only publishes multi-arch manifests
    targets:
    - jsonPath: defaults.svc.prometheus.prometheusConfigReloader.image.sha
      filePath: ../../config/config.yaml
    - jsonPath: defaults.mgmt.prometheus.prometheusConfigReloader.image.sha
      filePath: ../../config/config.yaml
  kube-state-metrics:
    source:
      image: mcr.microsoft.com/oss/v2/kubernetes/kube-state-metrics
      tagPattern: "^v\\d+\\.\\d+\\.\\d+-?\\d?$"
      multiArch: true # This image only publishes multi-arch manifests
    targets:
    - jsonPath: defaults.svc.prometheus.kubeStateMetrics.image.digest
      filePath: ../../config/config.yaml
    - jsonPath: defaults.mgmt.prometheus.kubeStateMetrics.image.digest
      filePath: ../../config/config.yaml
  admin-api:
    source:
      image: arohcpsvcdev.azurecr.io/arohcpadminapi
      useAuth: true
    targets:
    - jsonPath: defaults.adminApi.image.digest
      filePath: ../../config/config.yaml
  # Kube Webhook Certgen (Ingress NGINX)
  kube-webhook-certgen:
    source:
      image: registry.k8s.io/ingress-nginx/kube-webhook-certgen
      tagPattern: "^v\\d+\\.\\d+\\.\\d+$"
    targets:
    - jsonPath: defaults.svc.ingress.controller.admissionWebhook.patch.image.sha
      filePath: ../../config/config.yaml
    - jsonPath: defaults.mgmt.ingress.controller.admissionWebhook.patch.image.sha
      filePath: ../../config/config.yaml
