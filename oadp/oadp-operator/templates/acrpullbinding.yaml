apiVersion: acrpull.microsoft.com/v1beta2
kind: AcrPullBinding
metadata:
  name: oadp-operator-pull-binding
  namespace: '{{ .Release.Namespace }}'
spec:
  acr:
    environment: PublicCloud
    server: '{{ .Values.imageRegistry }}'
    scope: 'repository:{{ .Values.oadpOperator.repository }}:pull repository:{{ .Values.velero.repository }}:pull repository:{{ .Values.azurePlugin.repository }}:pull repository:{{ .Values.hypershiftPlugin.repository }}:pull'
  auth:
    workloadIdentity:
      serviceAccountRef: openshift-adp-controller-manager
      clientID: '{{ .Values.pullBinding.workloadIdentityClientId }}'
      tenantID: '{{ .Values.pullBinding.workloadIdentityTenantId }}'
  serviceAccountName: openshift-adp-controller-manager
