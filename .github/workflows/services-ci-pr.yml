name: ARO HCP Service Image Build (PR)
on:
  workflow_dispatch:
  pull_request:
    branches:
    - main
    paths:
    - '.github/workflows/services-ci.yml'
    - '.github/workflows/services-ci-pr.yml'
    - 'go.work'
    - 'frontend/**'
    - 'admin/**'
    - 'backend/**'
    - 'sessiongate/**'
    - 'image-sync/**/'
    - 'internal/**'
    - 'test-integration/**'
concurrency:
  group: ${{ github.workflow }}-${{ github.event.pull_request.number }}
  cancel-in-progress: true
jobs:
  build_images:
    name: 'Build service images'
    permissions:
      id-token: 'write'
      contents: 'read'
    uses: ./.github/workflows/services-ci.yml
    with:
      push: false
      cancel-in-progress: true
