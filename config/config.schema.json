{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Generated schema for Root",
  "type": "object",
  "definitions": {
    "namespaceName": {
      "type": "string",
      "minLength": 1,
      "maxLength": 63,
      "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$",
      "description": "A valid RFC1123 DNS label. Must start and end with a lowercase letter or number, and can contain hyphens in between."
    },
    "serviceAccountName": {
      "type": "string",
      "minLength": 1,
      "maxLength": 243,
      "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$",
      "description": "A valid RFC1123 DNS subdomain. Multiple RFC1123 DNS label devided by a dot."
    },
    "intOrString": {
      "description": "IntOrString is a type that can hold an int32 or a string.  When used in JSON or YAML marshalling and unmarshalling, it produces or consumes the inner type. This allows you to have, for example, a JSON field that can accept a name or number.",
      "format": "int-or-string",
      "oneOf": [
        {
          "type": "integer"
        },
        {
          "type": "string"
        }
      ]
    },
    "entraApplication": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "The name of the application. Needs to be unique within the tenant. https://eng.ms/docs/microsoft-security/identity/auth/auth-sts-protocols/ests/ests-troubleshooting-guides/tsgs/3p-apps-build-out-automation/gotchas-and-known-issues"
        },
        "useSNI": {
          "type": "boolean"
        },
        "ownerIds": {
          "$ref": "#/definitions/csv"
        },
        "manage": {
          "type": "boolean"
        }
      },
      "required": [
        "name",
        "ownerIds"
      ]
    },
    "semVer": {
      "type": "string",
      "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$"
    },
    "k8sRollingUpdateDeploymentStrategy": {
      "type": "object",
      "description": "Spec to control the desired behavior of rolling update.",
      "properties": {
        "maxSurge": {
          "description": "The maximum number of pods that can be scheduled above the desired number of pods. Value can be an absolute number (ex: 5) or a percentage of desired pods (ex: 10%). This can not be 0 if MaxUnavailable is 0. Absolute number is calculated from percentage by rounding up. Defaults to 25%. Example: when this is set to 30%, the new ReplicaSet can be scaled up immediately when the rolling update starts, such that the total number of old and new pods do not exceed 130% of desired pods. Once old pods have been killed, new ReplicaSet can be scaled up further, ensuring that total number of pods running at any time during the update is at most 130% of desired pods.",
          "allOf": [
            {
              "$ref": "#/definitions/intOrString"
            }
          ]
        },
        "maxUnavailable": {
          "description": "The maximum number of pods that can be unavailable during the update. Value can be an absolute number (ex: 5) or a percentage of desired pods (ex: 10%). Absolute number is calculated from percentage by rounding down. This can not be 0 if MaxSurge is 0. Defaults to 25%. Example: when this is set to 30%, the old ReplicaSet can be scaled down to 70% of desired pods immediately when the rolling update starts. Once new pods are ready, old ReplicaSet can be scaled down further, followed by scaling up the new ReplicaSet, ensuring that the total number of pods available at all times during the update is at least 70% of desired pods.",
          "allOf": [
            {
              "$ref": "#/definitions/intOrString"
            }
          ]
        }
      }
    },
    "k8sDeploymentStrategy": {
      "type": "object",
      "properties": {
        "rollingUpdate": {
          "description": "Rolling update config params",
          "allOf": [
            {
              "$ref": "#/definitions/k8sRollingUpdateDeploymentStrategy"
            }
          ]
        }
      }
    },
    "k8sDeployment": {
      "type": "object",
      "properties": {
        "namespace": {
          "$ref": "#/definitions/namespaceName"
        },
        "serviceAccountName": {
          "$ref": "#/definitions/serviceAccountName"
        },
        "replicas": {
          "type": "number",
          "minimum": 1
        },
        "deploymentStrategy": {
          "$ref": "#/definitions/k8sDeploymentStrategy"
        }
      },
      "additionalProperties": false,
      "required": [
        "namespace",
        "serviceAccountName"
      ]
    },
    "icmConnection": {
      "type": "object",
      "properties": {
        "actionGroupName": {
          "type": "string",
          "description": "Name of the ICM Action Group"
        },
        "actionGroupShortName": {
          "type": "string",
          "maxLength": 8,
          "description": "Name of the ICM Action Group"
        },
        "routingId": {
          "type": "string",
          "description": "ICM routing ID"
        },
        "automitigationEnabled": {
          "type": "string",
          "description": "ICM automitigation enabled ID"
        }
      },
      "additionalProperties": false,
      "required": [
        "actionGroupName",
        "actionGroupShortName",
        "routingId",
        "automitigationEnabled"
      ]
    },
    "postgresName": {
      "type": "string",
      "minLength": 3,
      "maxLength": 44,
      "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9]$",
      "description": "Server name must only contain lowercase letters, numbers, and hyphens. The server name must not start or end in a hyphen. Name must be between 3 be 63 characters long but we limited to 44 characters so we have a future option to use NSP: https://learn.microsoft.com/en-us/azure/private-link/network-security-perimeter-concepts"
    },
    "keyVaultName": {
      "type": "string",
      "minLength": 3,
      "maxLength": 24,
      "pattern": "^[a-zA-Z][a-zA-Z0-9]*(-[a-zA-Z0-9]+)*$",
      "description": "A KV name must be between 3-24 alphanumeric characters. The name must begin with a letter, end with a letter or digit, and not contain consecutive hyphens."
    },
    "operatorConfig": {
      "type": "object",
      "properties": {
        "roleNames": {
          "type": "string"
        }
      },
      "additionalProperties": false,
      "required": [
        "roleNames"
      ]
    },
    "clusterPrincipals": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "id": {
          "type": "string"
        },
        "type": {
          "type": "string"
        },
        "role": {
          "type": "string"
        },
        "tenantId": {
          "type": "string"
        }
      },
      "additionalProperties": false,
      "required": [
        "name",
        "id",
        "type",
        "role",
        "tenantId"
      ]
    },
    "dstsGroups": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "description": {
          "type": "string"
        }
      },
      "additionalProperties": false,
      "required": [
        "name",
        "description"
      ]
    },
    "certificateRef": {
      "type": "object",
      "properties": {
        "keyVault": {
          "$ref": "#/definitions/keyVaultName"
        },
        "name": {
          "type": "string"
        }
      },
      "required": [
        "keyVault",
        "name"
      ]
    },
    "genevaLogsAccount": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "accountName": {
          "type": "string",
          "minLength": 6,
          "maxLength": 32,
          "pattern": "^[a-zA-Z][a-zA-Z0-9]*$"
        },
        "secretName": {
          "description": "Name of the cerificate created and hostname in cert. Must match host in SAN",
          "type": "string"
        },
        "namespace": {
          "description": "Geneva logs account namespace",
          "type": "string"
        },
        "san": {
          "description": "Geneva logs account certificate SAN",
          "type": "string"
        },
        "configVersion": {
          "description": "Geneva logs account namespace configuration version",
          "pattern": "^[0-9]+$",
          "type": "string"
        }
      },
      "required": [
        "accountName",
        "secretName",
        "namespace",
        "san",
        "configVersion"
      ]
    },
    "registrationConfig": {
      "additionalProperties": false,
      "type": "object",
      "patternProperties": {
        "^.+$": {
          "type": "object",
          "properties": {
            "poll": {
              "type": "boolean"
            },
            "features": {
              "type": "array",
              "items": {
                "type": "object",
                "additionalProperties": true,
                "properties": {
                  "poll": {
                    "type": "boolean"
                  },
                  "name": {
                    "type": "string"
                  }
                },
                "required": [
                  "name"
                ]
              }
            }
          }
        }
      }
    },
    "audit": {
      "additionalProperties": false,
      "type": "object",
      "properties": {
        "connectSocket": {
          "type": "boolean"
        }
      },
      "required": [
        "connectSocket"
      ]
    },
    "tracing": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "address": {
          "type": "string",
          "description": "Defines exporter address"
        },
        "exporter": {
          "type": "string",
          "description": "Defines which exporter the SDK should use"
        }
      },
      "required": [
        "address",
        "exporter"
      ]
    },
    "acr": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "minLength": 5,
          "maxLength": 44,
          "pattern": "^[a-z0-9]+$",
          "description": "Resource names may contain alpha numeric characters only and must be between 5 and 50 characters. We limited the length to 44 characters so we have a future option to use NSP: https://learn.microsoft.com/en-us/azure/private-link/network-security-perimeter-concepts"
        },
        "zoneRedundantMode": {
          "$ref": "#/definitions/zoneRedundantMode"
        },
        "untaggedImagesRetention": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "days": {
              "type": "integer",
              "minimum": 0,
              "maximum": 365,
              "description": "Number of days to retain untagged images"
            }
          },
          "required": [
            "enabled",
            "days"
          ]
        }
      },
      "additionalProperties": false,
      "required": [
        "name",
        "zoneRedundantMode",
        "untaggedImagesRetention"
      ]
    },
    "nsp": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "minLength": 3,
          "maxLength": 80,
          "pattern": "^[a-zA-Z0-9][a-zA-Z0-9_-]*[a-zA-Z0-9_]$"
        },
        "accessMode": {
          "type": "string",
          "enum": [
            "Audit",
            "Enforced",
            "Learning"
          ]
        }
      },
      "additionalProperties": false
    },
    "resourceGroupName": {
      "type": "string",
      "minLength": 1,
      "maxLength": 90
    },
    "keyVault": {
      "type": "object",
      "properties": {
        "name": {
          "$ref": "#/definitions/keyVaultName"
        },
        "private": {
          "type": "boolean"
        },
        "softDelete": {
          "type": "boolean"
        },
        "tagKey": {
          "type": "string"
        },
        "tagValue": {
          "type": "string"
        }
      },
      "additionalProperties": false,
      "required": [
        "name",
        "private",
        "softDelete",
        "tagKey",
        "tagValue"
      ]
    },
    "aksAgentPool": {
      "type": "object",
      "properties": {
        "maxCount": {
          "type": "number"
        },
        "minCount": {
          "type": "number"
        },
        "osDiskSizeGB": {
          "type": "number"
        },
        "vmSize": {
          "type": "string"
        },
        "poolCount": {
          "type": "number"
        },
        "zones": {
          "$ref": "#/definitions/zones",
          "description": "Zones to use for the pools."
        },
        "zoneRedundantMode": {
          "$ref": "#/definitions/zoneRedundantMode"
        }
      },
      "additionalProperties": false,
      "required": [
        "maxCount",
        "minCount",
        "osDiskSizeGB",
        "vmSize",
        "poolCount",
        "zones",
        "zoneRedundantMode"
      ]
    },
    "aksConfig": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "name": {
          "type": "string",
          "minLength": 3,
          "maxLength": 44,
          "pattern": "^[a-zA-Z0-9][a-zA-Z0-9_-]*[a-zA-Z0-9]$",
          "description": "The name needs to be between 3-63 characters and can contain only letters, numbers, underscores, and hyphens. The name must start and end with a letter or number. We limit the name to 44 characters so we have a future option to use NSP: https://learn.microsoft.com/en-us/azure/private-link/network-security-perimeter-concepts"
        },
        "vnetAddressPrefix": {
          "type": "string"
        },
        "subnetPrefix": {
          "type": "string"
        },
        "podSubnetPrefix": {
          "type": "string"
        },
        "kubernetesVersion": {
          "type": "string"
        },
        "networkDataplane": {
          "type": "string",
          "enum": [
            "azure",
            "cilium"
          ]
        },
        "networkPolicy": {
          "type": "string",
          "enum": [
            "azure",
            "cilium"
          ]
        },
        "etcd": {
          "$ref": "#/definitions/keyVault"
        },
        "userAgentPool": {
          "$ref": "#/definitions/aksAgentPool"
        },
        "systemAgentPool": {
          "$ref": "#/definitions/aksAgentPool"
        },
        "infraAgentPool": {
          "$ref": "#/definitions/aksAgentPool"
        },
        "clusterOutboundIPAddressIPTags": {
          "$ref": "#/definitions/keyColonValueCSV"
        },
        "enableSwiftV2Vnet": {
          "type": "boolean"
        },
        "enableSwiftV2Nodepools": {
          "type": "boolean"
        }
      },
      "required": [
        "name",
        "vnetAddressPrefix",
        "subnetPrefix",
        "podSubnetPrefix",
        "kubernetesVersion",
        "etcd",
        "networkDataplane",
        "networkPolicy",
        "userAgentPool",
        "systemAgentPool",
        "clusterOutboundIPAddressIPTags"
      ]
    },
    "containerImage": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "registry": {
          "type": "string"
        },
        "repository": {
          "type": "string"
        },
        "digest": {
          "type": "string",
          "pattern": "^$|^sha256:[a-fA-F0-9]{64}$"
        }
      },
      "required": [
        "repository",
        "digest"
      ]
    },
    "containerImageSha": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "registry": {
          "type": "string"
        },
        "repository": {
          "type": "string"
        },
        "sha": {
          "type": "string",
          "pattern": "^$|^[a-fA-F0-9]{64}$"
        }
      },
      "required": [
        "repository",
        "sha"
      ]
    },
    "resources": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "cpu": {
          "type": "string",
          "pattern": "^([+-]?[0-9.]+)([eEinumkKMGTP]*[-+]?[0-9]*)$"
        },
        "memory": {
          "type": "string",
          "pattern": "^([+-]?[0-9.]+)([eEinumkKMGTP]*[-+]?[0-9]*)$"
        }
      }
    },
    "containerResources": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "requests": {
          "$ref": "#/definitions/resources"
        },
        "limits": {
          "$ref": "#/definitions/resources"
        }
      }
    },
    "keyColonValueCSV": {
      "type": "string",
      "pattern": "^$|^[\\w-\\.]+:[\\w\\/-]+(,[\\w-\\.]+:[\\w\\/-]+)*$"
    },
    "csv": {
      "type": "string",
      "pattern": "^$|^[\\w-\\.]+(,[\\w-\\.]+)*$"
    },
    "zones": {
      "oneOf": [
        {
          "type": "string",
          "pattern": "^$|^\\w+(?:,\\w+)*$"
        }
      ]
    },
    "certificateIssuer": {
      "type": "string",
      "enum": [
        "Self",
        "OneCertV2-PublicCA",
        "OneCertV2-PrivateCA"
      ]
    },
    "imageArtifact": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "adoProject": {
          "type": "string"
        },
        "artifactName": {
          "type": "string"
        },
        "buildId": {
          "type": "integer"
        }
      },
      "required": [
        "adoProject",
        "artifactName",
        "buildId"
      ]
    },
    "zoneRedundantMode": {
      "type": "string",
      "enum": [
        "Enabled",
        "Disabled",
        "Auto"
      ]
    },
    "prometheus": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "namespace": {
          "type": "string"
        },
        "namespaceNetworkPolicyGroup": {
          "type": "string"
        },
        "prometheusOperator": {
          "type:": "object",
          "additionalProperties": false,
          "properties": {
            "image": {
              "$ref": "#/definitions/containerImageSha"
            },
            "version": {
              "type": "string"
            }
          }
        },
        "prometheusSpec": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "image": {
              "$ref": "#/definitions/containerImageSha"
            },
            "version": {
              "type": "string"
            },
            "replicas": {
              "type": "number"
            },
            "shards": {
              "type": "number"
            },
            "resources": {
              "$ref": "#/definitions/containerResources"
            },
            "retention": {
              "type": "string",
              "pattern": "^(0|(([0-9]+)y)?(([0-9]+)w)?(([0-9]+)d)?(([0-9]+)h)?(([0-9]+)m)?(([0-9]+)s)?(([0-9]+)ms)?)$"
            },
            "retentionSize": {
              "type": "string",
              "pattern": "^$|^(0|([0-9]*[.])?[0-9]+((K|M|G|T|E|P)i?)?B)$"
            }
          }
        },
        "prometheusConfigReloader": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "image": {
              "$ref": "#/definitions/containerImageSha"
            }
          }
        },
        "kubeStateMetrics": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "image": {
              "$ref": "#/definitions/containerImage"
            }
          }
        }
      }
    },
    "postgres": {
      "type": "object",
      "properties": {
        "deploy": {
          "type": "boolean"
        },
        "name": {
          "$ref": "#/definitions/postgresName"
        },
        "private": {
          "type": "boolean"
        },
        "serverStorageSizeGB": {
          "type": "integer"
        },
        "serverVersion": {
          "type": "string"
        },
        "minTLSVersion": {
          "type": "string",
          "enum": [
            "TLSV1.2",
            "TLSV1.3"
          ]
        },
        "databaseName": {
          "type": "string"
        },
        "password": {
          "type": "string"
        },
        "zoneRedundantMode": {
          "$ref": "#/definitions/zoneRedundantMode"
        },
        "backupRetentionDays": {
          "type": "integer",
          "description": "Number of days to retain backups for the PostgreSQL server."
        },
        "geoRedundantBackup": {
          "type": "boolean",
          "description": "Enable geo-redundant backups for the PostgreSQL server."
        },
        "containerizedDb": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "image": {
              "type": "string"
            },
            "pvcCapacity": {
              "type": "string"
            }
          }
        }
      },
      "additionalProperties": false,
      "required": [
        "deploy",
        "name",
        "private",
        "serverStorageSizeGB",
        "serverVersion",
        "minTLSVersion",
        "databaseName",
        "zoneRedundantMode",
        "backupRetentionDays",
        "geoRedundantBackup"
      ]
    },
    "subscriptionMetadata": {
      "type": "object",
      "properties": {
        "key": {
          "type": "string"
        },
        "displayName": {
          "type": "string"
        },
        "airsRegisteredUserPrincipalId": {
          "type": "string"
        },
        "certificateDomains": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "providers": {
          "$ref": "#/definitions/registrationConfig"
        },
        "usePlannedQuota": {
          "type": "boolean"
        },
        "featureFlags": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      },
      "additionalProperties": false,
      "required": [
        "key",
        "displayName"
      ]
    },
    "storageAccount": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "pattern": "^[a-zA-Z0-9]{3,24}$"
        },
        "zoneRedundantMode": {
          "$ref": "#/definitions/zoneRedundantMode"
        },
        "public": {
          "type": "boolean",
          "description": "Whether the storage account is public or private. If private, it can only be accessed via Azure Front Door"
        },
        "privateLinkLocation": {
          "type": "string",
          "description": "The location of the storage account private link. Not every region supports private links so we need to be able to override the default location."
        }
      },
      "additionalProperties": false,
      "required": [
        "name",
        "zoneRedundantMode",
        "public"
      ]
    },
    "hcpBackups": {
      "type": "object",
      "properties": {
        "storageAccount": {
          "$ref": "#/definitions/storageAccount"
        },
        "storageAccountContainerName":{
          "type": "string"
        }
      }
    }
  },
  "properties": {
    "environmentName": {
      "type": "string"
    },
    "azureGeoShortId": {
      "type": "string"
    },
    "tenantId": {
      "type": "string"
    },
    "cloud": {
      "type": "string"
    },
    "azureRegionAvailabilityZoneCount": {
      "type": "integer"
    },
    "kvCertOfficerPrincipalId": {
      "type": "string",
      "description": "The principal ID of the cert officer that will be used to manage KV certificate issuers"
    },
    "kvCertAccessPrincipalId": {
      "type": "string",
      "description": "The principal ID of the cert officer that will be used to access KV certificate"
    },
    "kvCertAccessRoleId": {
      "type": "string",
      "description": "The Role ID used for cert access"
    },
    "dns": {
      "type": "object",
      "properties": {
        "baseDnsZoneRG": {
          "$ref": "#/definitions/resourceGroupName",
          "description": "The Azure RG that holds the parent DNS zones"
        },
        "cxParentZoneName": {
          "type": "string",
          "description": "The parent DNS zone name for regional HCP cluster DNS zones"
        },
        "svcParentZoneName": {
          "type": "string",
          "description": "The parent DNS zone name for regional ARO-HCP infrastructure, e.g. the RP"
        },
        "regionalSubdomain": {
          "type": "string",
          "description": "The regional subdomain to be used to construct the regional hcp and svc zones under their respective parents, e.g. regionalSubdomain.svcParentZoneName"
        },
        "parentZoneName": {
          "type": "string",
          "description": "The global parent DNS zone name"
        },
        "globalCertificatesDomain": {
          "type": "string",
          "description": "The global certificates domain"
        }
      },
      "additionalProperties": false,
      "required": [
        "baseDnsZoneRG",
        "cxParentZoneName",
        "svcParentZoneName",
        "regionalSubdomain",
        "globalCertificatesDomain"
      ]
    },
    "acm": {
      "type": "object",
      "properties": {
        "operator": {
          "type": "object",
          "properties": {
            "version": {
              "type": "string"
            },
            "bundle": {
              "$ref": "#/definitions/containerImage"
            }
          },
          "required": [
            "version",
            "bundle"
          ]
        },
        "mce": {
          "type": "object",
          "properties": {
            "version": {
              "type": "string"
            },
            "bundle": {
              "$ref": "#/definitions/containerImage"
            }
          },
          "additionalProperties": false,
          "required": [
            "version",
            "bundle"
          ]
        }
      },
      "additionalProperties": false,
      "required": [
        "operator",
        "mce"
      ]
    },
    "pko": {
      "type": "object",
      "properties": {
        "imagePackage": {
          "$ref": "#/definitions/containerImage"
        },
        "imageManager": {
          "$ref": "#/definitions/containerImage"
        },
        "remotePhaseManager": {
          "$ref": "#/definitions/containerImage"
        },
        "managedIdentityName": {
          "type": "string"
        },
        "k8s": {
          "$ref": "#/definitions/k8sDeployment"
        }
      },
      "additionalProperties": false,
      "required": [
        "managedIdentityName",
        "k8s",
        "imagePackage",
        "imageManager",
        "remotePhaseManager"
      ]
    },
    "clustersService": {
      "type": "object",
      "properties": {
        "deployDebugJobs": {
          "type": "boolean",
          "description": "If true, debug jobs will be deployed to the cluster. The jobs will be used to debug the CS service."
        },
        "environment": {
          "type": "string",
          "minLength": 1,
          "maxLength": 10
        },
        "denyAssignments": {
          "type": "string",
          "enum": [
            "enabled",
            "disabled"
          ]
        },
        "image": {
          "$ref": "#/definitions/containerImage"
        },
        "tracing": {
          "$ref": "#/definitions/tracing"
        },
        "managedIdentityName": {
          "type": "string",
          "description": "The name of the MSI that will be used by CS to interact with Azure"
        },
        "provisionShardClusterLimit": {
          "type": "integer",
          "description": "The maximum number of HCPs that can be placed on an MC, sadly not configurable per MC"
        },
        "k8s": {
          "$ref": "#/definitions/k8sDeployment"
        },
        "batchProcessesDryRun": {
          "type": "boolean",
          "description": "If true, batch processes will only log what they would do, without making any changes."
        },
        "batchProcesses": {
          "type": "string",
          "description": "A comma-separated list of batch processes to execute. If set to an empty string, no batch processes are executed. No whitespace characters are allowed before or after the commas, or at the beginning or end of the list."
        },
        "postgres": {
          "$ref": "#/definitions/postgres"
        },
        "azureOperatorsManagedIdentities": {
          "type": "object",
          "properties": {
            "roleSetName": {
              "type": "string",
              "enum": [
                "dev",
                "public",
                "ff"
              ],
              "description": "The role set name refers to a particular cloud specific set of operator role definitions, found in the CS values.yaml file"
            }
          },
          "additionalProperties": false,
          "required": [
            "roleSetName"
          ]
        },
        "azureRuntimeConfig": {
          "type": "object",
          "properties": {
            "tlsCertificatesIssuer": {
              "$ref": "#/definitions/certificateIssuer"
            }
          },
          "additionalProperties": false,
          "required": [
            "tlsCertificatesIssuer"
          ]
        },
        "ocpVersions": {
          "type": "object",
          "properties": {
            "defaultVersion": {
              "type": "object",
              "properties": {
                "version": {
                  "$ref": "#/definitions/semVer"
                }
              },
              "required": [
                "version"
              ],
              "additionalProperties": false
            },
            "channelGroups": {
              "type": "object",
              "properties": {
                "stable": {
                  "type": "object",
                  "properties": {
                    "minVersion": {
                      "$ref": "#/definitions/semVer"
                    },
                    "maxVersion": {
                      "oneOf": [
                        {
                          "$ref": "#/definitions/semVer"
                        },
                        {
                          "type": "string",
                          "pattern": "^$"
                        }
                      ]
                    }
                  },
                  "required": [
                    "minVersion",
                    "maxVersion"
                  ],
                  "additionalProperties": false
                }
              },
              "required": [
                "stable"
              ],
              "additionalProperties": false
            }
          },
          "required": [
            "defaultVersion",
            "channelGroups"
          ],
          "additionalProperties": false
        }
      },
      "additionalProperties": false,
      "required": [
        "environment",
        "denyAssignments",
        "image",
        "managedIdentityName",
        "k8s",
        "azureOperatorsManagedIdentities",
        "postgres",
        "tracing",
        "azureRuntimeConfig",
        "ocpVersions"
      ]
    },
    "cxKeyVault": {
      "$ref": "#/definitions/keyVault"
    },
    "extraVars": {
      "type": "object",
      "additionalProperties": true,
      "properties": {},
      "required": []
    },
    "firstPartyAppClientId": {
      "type": "string"
    },
    "firstPartyAppCertificate": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "issuer": {
          "$ref": "#/definitions/certificateIssuer"
        },
        "manage": {
          "type": "boolean"
        }
      },
      "additionalProperties": false,
      "required": [
        "name",
        "issuer",
        "manage"
      ]
    },
    "miMockClientId": {
      "type": "string"
    },
    "miMockPrincipalId": {
      "type": "string"
    },
    "miMockCertName": {
      "type": "string"
    },
    "armHelperClientId": {
      "type": "string"
    },
    "armHelperFPAPrincipalId": {
      "type": "string"
    },
    "armHelperCertName": {
      "type": "string"
    },
    "backend": {
      "type": "object",
      "properties": {
        "image": {
          "$ref": "#/definitions/containerImage"
        },
        "tracing": {
          "$ref": "#/definitions/tracing"
        },
        "k8s": {
          "$ref": "#/definitions/k8sDeployment"
        },
        "managedIdentityName": {
          "type": "string",
          "description": "The name of the MSI that will be used by the backend to interact with Azure"
        }
      },
      "additionalProperties": false,
      "required": [
        "image",
        "tracing",
        "k8s",
        "managedIdentityName"
      ]
    },
    "adminApi": {
      "type": "object",
      "properties": {
        "image": {
          "$ref": "#/definitions/containerImage"
        },
        "k8s": {
          "$ref": "#/definitions/k8sDeployment"
        },
        "managedIdentityName": {
          "type": "string",
          "description": "The name of the MSI that will be used by the frontend to interact with Azure"
        },
        "cert": {
          "type": "object",
          "properties": {
            "name": {
              "type": "string",
              "maxLength": 127,
              "pattern": "^[a-zA-Z0-9-]+$"
            },
            "issuer": {
              "$ref": "#/definitions/certificateIssuer"
            }
          },
          "additionalProperties": false,
          "required": [
            "name",
            "issuer"
          ]
        }
      },
      "additionalProperties": false,
      "required": [
        "image",
        "k8s",
        "managedIdentityName",
        "cert"
      ]
    },
    "frontend": {
      "type": "object",
      "properties": {
        "audit": {
          "$ref": "#/definitions/audit"
        },
        "image": {
          "$ref": "#/definitions/containerImage"
        },
        "tracing": {
          "$ref": "#/definitions/tracing"
        },
        "k8s": {
          "$ref": "#/definitions/k8sDeployment"
        },
        "managedIdentityName": {
          "type": "string",
          "description": "The name of the MSI that will be used by the frontend to interact with Azure"
        },
        "cosmosDB": {
          "type": "object",
          "properties": {
            "deploy": {
              "type": "boolean"
            },
            "disableLocalAuth": {
              "type": "boolean"
            },
            "name": {
              "type": "string"
            },
            "private": {
              "type": "boolean"
            },
            "zoneRedundantMode": {
              "$ref": "#/definitions/zoneRedundantMode"
            }
          },
          "additionalProperties": false,
          "required": [
            "deploy",
            "disableLocalAuth",
            "name",
            "private"
          ]
        },
        "cert": {
          "type": "object",
          "properties": {
            "name": {
              "type": "string",
              "maxLength": 127,
              "pattern": "^[a-zA-Z0-9-]+$"
            },
            "issuer": {
              "$ref": "#/definitions/certificateIssuer"
            }
          },
          "additionalProperties": false,
          "required": [
            "name",
            "issuer"
          ]
        }
      },
      "additionalProperties": false,
      "required": [
        "image",
        "cosmosDB",
        "cert",
        "tracing",
        "k8s",
        "managedIdentityName"
      ]
    },
    "billing": {
      "type": "object",
      "properties": {
        "rg": {
          "$ref": "#/definitions/resourceGroupName"
        },
        "aub": {
          "type": "object",
          "properties": {
            "accountName": {
              "type": "string"
            },
            "cloudSuffix": {
              "type": "string"
            }
          },
          "required": [
            "accountName",
            "cloudSuffix"
          ]
        },
        "pav2": {
          "type": "object",
          "properties": {
            "cloudName": {
              "type": "string"
            }
          },
          "required": [
            "cloudName"
          ]
        },
        "kusto": {
          "type": "object",
          "properties": {
            "sku": {
              "type": "string"
            },
            "clusterName": {
              "type": "string"
            },
            "clusterPrincipals": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/clusterPrincipals"
              }
            },
            "dstsGroups": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/dstsGroups"
              }
            },
            "vmUsageStaleThreshold": {
              "type": "string",
              "description": "If the latest VM usage event in kusto is older than this threshold compared to the current time, skip deletion checks for billing documents. 0 to disable this check."
            }
          },
          "required": [
            "sku",
            "clusterName",
            "clusterPrincipals",
            "dstsGroups",
            "vmUsageStaleThreshold"
          ]
        },
        "eventHub": {
          "type": "object",
          "properties": {
            "namespace": {
              "type": "string"
            },
            "subscriptionId": {
              "type": "string"
            },
            "resourceGroupName": {
              "type": "string"
            }
          },
          "required": [
            "namespace",
            "subscriptionId",
            "resourceGroupName"
          ]
        },
        "imageArtifact": {
          "$ref": "#/definitions/imageArtifact"
        }
      },
      "additionalProperties": false,
      "required": [
        "rg",
        "aub",
        "pav2",
        "kusto",
        "eventHub",
        "imageArtifact"
      ]
    },
    "ev2": {
      "type": "object",
      "properties": {
        "assistedId": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "certificate": {
              "$ref": "#/definitions/certificateRef"
            },
            "applicationId": {
              "type": "string"
            },
            "dstsHost": {
              "type": "string"
            }
          },
          "required": [
            "certificate",
            "applicationId"
          ]
        }
      },
      "additionalProperties": false,
      "required": [
        "assistedId"
      ]
    },
    "geneva": {
      "type": "object",
      "properties": {
        "principalId": {
          "type": "string"
        },
        "resourceContributor": {
          "type": "string"
        },
        "metrics": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "cluster": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "account": {
                  "type": "string"
                }
              },
              "required": [
                "account"
              ]
            },
            "rp": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "account": {
                  "type": "string"
                }
              },
              "required": [
                "account"
              ]
            }
          },
          "required": [
            "cluster",
            "rp"
          ]
        },
        "logs": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "adminCertName": {
              "type": "string"
            },
            "adminCertificateDomain": {
              "type": "string"
            },
            "administrators": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "alias": {
                  "type": "array"
                },
                "securityGroup": {
                  "type": "string"
                }
              },
              "required": [
                "alias",
                "securityGroup"
              ]
            },
            "manageCertificates": {
              "type": "boolean"
            },
            "certificateIssuer": {
              "$ref": "#/definitions/certificateIssuer"
            },
            "certificateDomain": {
              "type": "string"
            },
            "typeName": {
              "type": "string"
            },
            "environment": {
              "type": "string",
              "enum": [
                "DiagnosticsProd",
                "BillingProd",
                "FirstPartyProd",
                "ExternalProd",
                "CaFairfax",
                "CaMooncake",
                "UsNat",
                "UsSec",
                "Test",
                "Stage",
                "Canary"
              ]
            },
            "cluster": {
              "$ref": "#/definitions/genevaLogsAccount"
            },
            "rp": {
              "$ref": "#/definitions/genevaLogsAccount"
            }
          },
          "required": [
            "administrators",
            "typeName",
            "environment"
          ]
        },
        "actions": {
          "type": "object",
          "description": "Geneva Actions related configuration",
          "additionalProperties": false,
          "required": [
            "serviceTag",
            "keyVault",
            "certificate",
            "allowedAcisExtensions",
            "genevaActionsPrincipalId",
            "application"
          ],
          "properties": {
            "serviceTag": {
              "type": "string",
              "description": "The Service Tag used by Geneva Actions for their egress traffic."
            },
            "keyVault": {
              "$ref": "#/definitions/keyVault",
              "description": "Here we store the certificate for the app defined in .application"
            },
            "certificate": {
              "type": "object",
              "description": "This is the certificate for the app defined in .application",
              "properties": {
                "name": {
                  "type": "string"
                },
                "issuer": {
                  "$ref": "#/definitions/certificateIssuer"
                },
                "manage": {
                  "type": "boolean"
                }
              },
              "additionalProperties": false,
              "required": [
                "name",
                "issuer",
                "manage"
              ]
            },
            "allowedAcisExtensions": {
              "type": "string"
            },
            "genevaActionsPrincipalId": {
              "type": "string",
              "description": "This is the principal ID of the MSFT owned Geneva Actions identity that will call into our Geneva Actions."
            },
            "enabled": {
              "type": "boolean"
            },
            "application": {
              "$ref": "#/definitions/entraApplication",
              "description": "This is the app our Geneva Actions will use to talk to the Admin API"
            }
          }
        }
      },
      "additionalProperties": false,
      "required": [
        "principalId",
        "resourceContributor",
        "metrics",
        "logs",
        "actions"
      ]
    },
    "kusto": {
      "type": "object",
      "properties": {
        "rg": {
          "type": "string"
        },
        "manageInstance": {
          "type": "boolean"
        },
        "sku": {
          "type": "string"
        },
        "tier": {
          "type": "string"
        },
        "serviceLogsDatabase": {
          "type": "string"
        },
        "hostedControlPlaneLogsDatabase": {
          "type": "string"
        },
        "adminGroups": {
          "type": "string"
        },
        "viewerGroups": {
          "type": "string"
        },
        "kustoName": {
          "type": "string",
          "description": "Name of the kusto cluster. Must begin with a letter and contain between 4 and 22 lowercase alphanumeric characters.",
          "pattern": "^[a-z][a-z0-9-]*$",
          "minLength": 4,
          "maxLength": 22
        },
        "resourceGroup": {
          "description": "DEPRECATED, for backward compatibility only",
          "type": "string"
        },
        "cluster": {
          "description": "DEPRECATED, for backward compatibility only",
          "type": "string"
        },
        "ingestionUrl": {
          "description": "DEPRECATED, for backward compatibility only",
          "type": "string"
        },
        "environmentName": {
          "description": "DEPRECATED, for backward compatibility only",
          "type": "string"
        },
        "enabled": {
          "description": "DEPRECATED, for backward compatibility only",
          "type": "boolean"
        }
      },
      "additionalProperties": false,
      "required": [
        "manageInstance",
        "sku",
        "tier",
        "serviceLogsDatabase",
        "hostedControlPlaneLogsDatabase",
        "adminGroups",
        "viewerGroups",
        "kustoName"
      ]
    },
    "mise": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "deploy": {
          "type": "boolean",
          "description": "Whether to deploy MISE. Be careful where to enable MISE as it can't be deployed in non-MSFT tenants."
        },
        "arm": {
          "type": "object",
          "properties": {
            "policyLabel": {
              "type": "string",
              "description": "The label of the ARM policy."
            },
            "tenantId": {
              "type": "string",
              "description": "The tenant ID where the ARM application lives."
            },
            "applicationId": {
              "type": "string",
              "description": "The application ID of the ARM application."
            },
            "authorityFQDN": {
              "type": "string",
              "description": "The authority/issuer FQDN of the ARM applications auth tokens."
            },
            "audienceFQDN": {
              "type": "string",
              "description": "The audience FQDN of the ARM applications auth tokens."
            }
          },
          "required": [
            "policyLabel",
            "tenantId",
            "applicationId",
            "authorityFQDN",
            "audienceFQDN"
          ]
        },
        "genevaActions": {
          "type": "object",
          "properties": {
            "policyLabel": {
              "type": "string",
              "description": "The label of the Geneva Actions policy."
            },
            "authorityFQDN": {
              "type": "string",
              "description": "The authority/issuer FQDN of the Geneva Actions applications auth tokens."
            },
            "audienceFQDN": {
              "type": "string",
              "description": "The audience FQDN of the Geneva Actions applications auth tokens."
            }
          },
          "required": [
            "policyLabel",
            "authorityFQDN",
            "audienceFQDN"
          ]
        },
        "image": {
          "$ref": "#/definitions/containerImage"
        },
        "tracing": {
          "$ref": "#/definitions/tracing",
          "description": "Tracing configuration for OTLP traces."
        }
      },
      "required": [
        "deploy",
        "image",
        "arm",
        "genevaActions",
        "tracing"
      ]
    },
    "msiRp": {
      "type": "object",
      "properties": {
        "dataPlaneAudienceResource": {
          "type": "string"
        }
      },
      "additionalProperties": false,
      "required": [
        "dataPlaneAudienceResource"
      ]
    },
    "msiCredentialsRefresher": {
      "type": "object",
      "properties": {
        "managedIdentityName": {
          "type": "string",
          "description": "The name of the MSI that will be used by the refresher"
        },
        "firstPartyAppClientId": {
          "type": "string",
          "description": "The client ID of the first party application that will be used by the refresher"
        },
        "earlyRefreshFrequency": {
          "type": "string",
          "description": "Early refresh interval before credential is eligible for refresh. For testing, 0 means no early refresh. Example: 24h"
        },
        "k8s": {
          "$ref": "#/definitions/k8sDeployment"
        },
        "image": {
          "$ref": "#/definitions/containerImage"
        },
        "certificate": {
          "type": "object",
          "properties": {
            "name": {
              "type": "string"
            },
            "issuer": {
              "$ref": "#/definitions/certificateIssuer"
            },
            "manage": {
              "type": "boolean"
            },
            "commonName": {
              "type": "string"
            },
            "sanDnsNames": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          },
          "additionalProperties": false,
          "required": [
            "name",
            "issuer",
            "manage",
            "commonName",
            "sanDnsNames"
          ]
        },
        "imageArtifact": {
          "$ref": "#/definitions/imageArtifact"
        }
      },
      "additionalProperties": false,
      "required": [
        "managedIdentityName",
        "k8s",
        "image",
        "certificate",
        "earlyRefreshFrequency",
        "imageArtifact"
      ]
    },
    "global": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "nsp": {
          "$ref": "#/definitions/nsp"
        },
        "rg": {
          "$ref": "#/definitions/resourceGroupName"
        },
        "billing": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "rg": {
              "$ref": "#/definitions/resourceGroupName"
            },
            "digest": {
              "type": "string"
            }
          },
          "required": [
            "rg",
            "digest"
          ]
        },
        "subscription": {
          "$ref": "#/definitions/subscriptionMetadata"
        },
        "region": {
          "type": "string"
        },
        "globalMSIName": {
          "type": "string",
          "description": "The name of the MSI that will be used for deployments."
        },
        "contributorRoleId": {
          "type": "string",
          "description": "The ID of the role assignment given to the global MSI to deploy our service."
        },
        "safeDnsIntAppObjectId": {
          "type": "string",
          "description": "SafeDnsIntApplication object ID use to delegate child DNS. This is only required for MSFT INT and can be left empty for other targets"
        },
        "keyVault": {
          "$ref": "#/definitions/keyVault"
        }
      },
      "required": [
        "rg",
        "billing",
        "subscription",
        "region",
        "keyVault"
      ]
    },
    "backplaneAPI": {
      "type": "object",
      "properties": {
        "image": {
          "$ref": "#/definitions/containerImage"
        }
      },
      "additionalProperties": false,
      "required": [
        "image"
      ]
    },
    "hypershift": {
      "type": "object",
      "properties": {
        "image": {
          "$ref": "#/definitions/containerImage"
        },
        "additionalInstallArg": {
          "type": "string"
        },
        "namespace": {
          "type": "string"
        },
        "sharedIngressIPTag": {
          "type": "string",
          "enum": [
            "FirstPartyUsage=/aro-hcp-prod-inbound-customerapi",
            "FirstPartyUsage=/NonProd",
            ""
          ]
        }
      },
      "additionalProperties": false,
      "required": [
        "additionalInstallArg",
        "namespace"
      ]
    },
    "imageSync": {
      "type": "object",
      "properties": {
        "environmentName": {
          "type": "string"
        },
        "outboundServiceTags": {
          "$ref": "#/definitions/keyColonValueCSV"
        },
        "ondemandSync": {
          "type": "object",
          "properties": {
            "pullSecretName": {
              "type": "string"
            }
          },
          "additionalProperties": false,
          "required": [
            "pullSecretName"
          ]
        },
        "ocMirror": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "jobNamePrefix": {
              "type": "string"
            },
            "image": {
              "$ref": "#/definitions/containerImage"
            },
            "pullSecretName": {
              "type": "string"
            },
            "operatorVersionsToMirror": {
              "$ref": "#/definitions/csv"
            }
          },
          "additionalProperties": false,
          "required": [
            "enabled",
            "image",
            "pullSecretName",
            "operatorVersionsToMirror"
          ]
        }
      },
      "additionalProperties": false,
      "required": [
        "environmentName",
        "outboundServiceTags",
        "ondemandSync",
        "ocMirror"
      ]
    },
    "arobit": {
      "type": "object",
      "properties": {
        "forwarder": {
          "type": "object",
          "properties": {
            "image": {
              "$ref": "#/definitions/containerImage"
            }
          },
          "additionalProperties": false,
          "required": [
            "image"
          ]
        },
        "kusto": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "environmentName": {
              "type": "string"
            }
          },
          "additionalProperties": false,
          "required": [
            "enabled",
            "environmentName"
          ]
        },
        "mdsd": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "image": {
              "$ref": "#/definitions/containerImage"
            }
          },
          "additionalProperties": false,
          "required": [
            "image"
          ]
        }
      }
    },
    "kubeEvents": {
      "type": "object",
      "properties": {
        "image": {
          "$ref": "#/definitions/containerImage"
        },
        "enabled": {
          "type": "boolean"
        }
      },
      "additionalProperties": false,
      "required": [
        "image",
        "enabled"
      ]
    },
    "acrPull": {
      "type": "object",
      "properties": {
        "image": {
          "$ref": "#/definitions/containerImage"
        }
      },
      "additionalProperties": false,
      "required": [
        "image"
      ]
    },
    "secretSyncController": {
      "type": "object",
      "properties": {
        "image": {
          "$ref": "#/definitions/containerImage"
        },
        "providerImage": {
          "$ref": "#/definitions/containerImage"
        }
      },
      "additionalProperties": false,
      "required": [
        "image",
        "providerImage"
      ]
    },
    "maestro": {
      "type": "object",
      "properties": {
        "certDomain": {
          "type": "string",
          "description": "Optional SAN base domain for Maestro Eventgrid certificates. If missing, defaults to maestro.${dns.regionalSubdomain}.${dns.svcParentZoneName}"
        },
        "certIssuer": {
          "$ref": "#/definitions/certificateIssuer"
        },
        "server": {
          "type": "object",
          "properties": {
            "mqttClientName": {
              "type": "string"
            },
            "managedIdentityName": {
              "type": "string"
            },
            "loglevel": {
              "type": "integer"
            },
            "tracing": {
              "$ref": "#/definitions/tracing"
            },
            "k8s": {
              "$ref": "#/definitions/k8sDeployment"
            }
          },
          "additionalProperties": false,
          "required": [
            "mqttClientName",
            "managedIdentityName",
            "loglevel",
            "k8s"
          ]
        },
        "agent": {
          "type": "object",
          "properties": {
            "consumerName": {
              "type": "string",
              "maxLength": 128
            },
            "loglevel": {
              "type": "integer"
            },
            "managedIdentityName": {
              "type": "string"
            },
            "k8s": {
              "$ref": "#/definitions/k8sDeployment"
            },
            "sidecar": {
              "type:": "object",
              "additionalProperties": false,
              "properties": {
                "image": {
                  "$ref": "#/definitions/containerImage"
                }
              }
            }
          },
          "additionalProperties": false,
          "required": [
            "consumerName",
            "loglevel",
            "sidecar",
            "managedIdentityName",
            "k8s"
          ]
        },
        "eventGrid": {
          "type": "object",
          "properties": {
            "maxClientSessionsPerAuthName": {
              "type": "integer"
            },
            "name": {
              "type": "string",
              "minLength": 3,
              "maxLength": 44,
              "pattern": "^[a-zA-Z0-9-]+$",
              "not": {
                "anyOf": [
                  {
                    "pattern": "^Microsoft-"
                  },
                  {
                    "pattern": "^EventGrid-"
                  },
                  {
                    "pattern": "^System-"
                  }
                ]
              },
              "description": "Name length should be between 3 and 50 characters in length but we limited to 44 characters so we have a future option to use NSP: https://learn.microsoft.com/en-us/azure/private-link/network-security-perimeter-concepts. Only alphanumeric letters, digits and the '-' character are allowed in the topic name. Also, the name shouldn't start with the following reserved words: Microsoft-, EventGrid-, System-"
            },
            "private": {
              "type": "boolean"
            }
          },
          "additionalProperties": false,
          "required": [
            "maxClientSessionsPerAuthName",
            "name",
            "private"
          ]
        },
        "image": {
          "$ref": "#/definitions/containerImage"
        },
        "postgres": {
          "$ref": "#/definitions/postgres"
        },
        "restrictIstioIngress": {
          "type": "boolean"
        }
      },
      "additionalProperties": false,
      "required": [
        "certIssuer",
        "agent",
        "server",
        "eventGrid",
        "image",
        "postgres",
        "restrictIstioIngress"
      ]
    },
    "mgmt": {
      "type": "object",
      "properties": {
        "aks": {
          "$ref": "#/definitions/aksConfig"
        },
        "applyKubeletFixes": {
          "type": "boolean"
        },
        "hcpBackups": {
          "$ref": "#/definitions/hcpBackups"
        },
        "nsp": {
          "$ref": "#/definitions/nsp"
        },
        "rg": {
          "$ref": "#/definitions/resourceGroupName"
        },
        "subscription": {
          "$ref": "#/definitions/subscriptionMetadata"
        },
        "jaeger": {
          "deploy": "boolean"
        },
        "prometheus": {
          "description": "Prometheus deployment configuration",
          "$ref": "#/definitions/prometheus"
        }
      },
      "additionalProperties": false,
      "required": [
        "aks",
        "applyKubeletFixes",
        "rg",
        "subscription",
        "prometheus"
      ]
    },
    "mgmtKeyVault": {
      "$ref": "#/definitions/keyVault"
    },
    "monitoring": {
      "type": "object",
      "properties": {
        "grafanaName": {
          "type": "string"
        },
        "grafanaMajorVersion": {
          "type": "string"
        },
        "grafanaZoneRedundantMode": {
          "$ref": "#/definitions/zoneRedundantMode"
        },
        "grafanaRoles": {
          "type": "string",
          "description": "A space-separated list of Service Principals IDs, Types and their desired grafana roles The format is: <principalId>/<principalType>/<role>, e.g. 12345678-1234-1234-1234-123456789012/Group/Admin",
          "pattern": "^$|^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}\\/(Group|ServicePrincipal|User)\\/(Contributor|Admin|Viewer)\\s*)+$"
        },
        "svcWorkspaceName": {
          "type": "string",
          "minLength": 4,
          "maxLength": 44,
          "pattern": "^[a-z0-9][a-z0-9-]*[a-z0-9]$",
          "description": "The workspace name should include 4-63 letters, digits or '-'. The '-' shouldn't be the first or the last symbol. We limit the name to 44 characters so we have a future option to use NSP: https://learn.microsoft.com/en-us/azure/private-link/network-security-perimeter-concepts"
        },
        "hcpWorkspaceName": {
          "type": "string",
          "minLength": 4,
          "maxLength": 44,
          "pattern": "^[a-z0-9][a-z0-9-]*[a-z0-9]$",
          "description": "The workspace name should include 4-63 letters, digits or '-'. The '-' shouldn't be the first or the last symbol. We limit the name to 44 characters so we have a future option to use NSP: https://learn.microsoft.com/en-us/azure/private-link/network-security-perimeter-concepts"
        },
        "icm": {
          "type": "object",
          "properties": {
            "manageConnection": {
              "type": "boolean"
            },
            "connectionName": {
              "type": "string",
              "description": "ICM connection Name"
            },
            "connectionId": {
              "type": "string",
              "description": "ICM connection id"
            },
            "environment": {
              "type": "string",
              "description": "ICM environment"
            },
            "sre": {
              "$ref": "#/definitions/icmConnection"
            },
            "sl": {
              "$ref": "#/definitions/icmConnection"
            },
            "msft": {
              "$ref": "#/definitions/icmConnection"
            }
          },
          "additionalProperties": false,
          "required": [
            "connectionName",
            "connectionId",
            "environment",
            "sre",
            "sl"
          ]
        }
      },
      "additionalProperties": false,
      "required": [
        "grafanaName",
        "grafanaRoles",
        "grafanaZoneRedundantMode",
        "svcWorkspaceName",
        "hcpWorkspaceName"
      ]
    },
    "routeMonitorOperator": {
      "type": "object",
      "properties": {
        "operatorImage": {
          "$ref": "#/definitions/containerImage"
        },
        "blackboxExporterImage": {
          "$ref": "#/definitions/containerImage"
        }
      },
      "additionalProperties": false,
      "required": [
        "operatorImage",
        "blackboxExporterImage"
      ]
    },
    "logs": {
      "type": "object",
      "additionalProperties": false,
      "description": "Log infrastructure configuration",
      "properties": {
        "loganalytics": {
          "type": "object",
          "description": "Log Analytics configuration",
          "properties": {
            "enable": {
              "type": "boolean"
            }
          },
          "additionalProperties": false,
          "required": [
            "enable"
          ]
        },
        "mdsd": {
          "type": "object",
          "properties": {
            "namespace": {
              "type": "string"
            },
            "msiName": {
              "type": "string"
            },
            "serviceAccountName": {
              "type": "string"
            },
            "cert": {
              "type": "object",
              "properties": {
                "name": {
                  "description": "Logs certificate name",
                  "type": "string"
                },
                "type": {
                  "description": "Logs certificate type",
                  "type": "string"
                },
                "issuer": {
                  "description": "Logs certificate issuer",
                  "type": "string"
                }
              },
              "additionalProperties": false,
              "required": [
                "name",
                "type",
                "issuer"
              ]
            },
            "subscriptions": {
              "description": "Geneva logs resources subscriptions",
              "type": "array"
            }
          },
          "additionalProperties": false,
          "required": [
            "namespace",
            "msiName",
            "serviceAccountName",
            "cert",
            "subscriptions"
          ]
        }
      },
      "required": [
        "mdsd",
        "loganalytics"
      ]
    },
    "msiKeyVault": {
      "$ref": "#/definitions/keyVault"
    },
    "oidc": {
      "type": "object",
      "properties": {
        "storageAccount": {
          "ref" : "#/definitions/storageAccount"
        },
        "frontdoor": {
          "type": "object",
          "properties": {
            "name": {
              "type": "string"
            },
            "sku": {
              "type": "string",
              "enum": [
                "Premium_AzureFrontDoor",
                "Standard_AzureFrontDoor"
              ]
            },
            "subdomain": {
              "type": "string"
            },
            "keyVault": {
              "$ref": "#/definitions/keyVault"
            },
            "useManagedCertificates": {
              "type": "boolean"
            },
            "msiName": {
              "type": "string"
            },
            "manage": {
              "type": "boolean"
            }
          },
          "additionalProperties": false,
          "required": [
            "name",
            "subdomain",
            "sku",
            "keyVault",
            "useManagedCertificates",
            "msiName",
            "manage"
          ]
        }
      },
      "additionalProperties": false,
      "required": [
        "storageAccount",
        "frontdoor"
      ]
    },
    "region": {
      "type": "string"
    },
    "regionRG": {
      "$ref": "#/definitions/resourceGroupName"
    },
    "regionBuildout": {
      "type": "boolean",
      "description": "Indicates if the region is still in the process of being deployed. When true, various operational features are disabled to prevent issues during deployment, including: ICM alerting. This should be set to false once the region is fully operational"
    },
    "serviceKeyVault": {
      "type": "object",
      "properties": {
        "name": {
          "$ref": "#/definitions/keyVaultName"
        },
        "private": {
          "type": "boolean"
        },
        "region": {
          "type": "string"
        },
        "rg": {
          "$ref": "#/definitions/resourceGroupName"
        },
        "softDelete": {
          "type": "boolean"
        },
        "assignNSP": {
          "type": "boolean"
        },
        "tagKey": {
          "type": "string"
        },
        "tagValue": {
          "type": "string"
        }
      },
      "additionalProperties": false,
      "required": [
        "name",
        "private",
        "region",
        "rg",
        "softDelete",
        "tagKey",
        "tagValue"
      ]
    },
    "svc": {
      "type": "object",
      "properties": {
        "aks": {
          "$ref": "#/definitions/aksConfig"
        },
        "rg": {
          "$ref": "#/definitions/resourceGroupName"
        },
        "subscription": {
          "$ref": "#/definitions/subscriptionMetadata"
        },
        "nsp": {
          "$ref": "#/definitions/nsp"
        },
        "jaeger": {
          "deploy": "boolean"
        },
        "istio": {
          "type": "object",
          "properties": {
            "istioctlVersion": {
              "description": "Latest version of istioctl. This is used to download the istioctl",
              "type": "string"
            },
            "tag": {
              "description": "The revision tag used in istioctl",
              "type": "string"
            },
            "versions": {
              "description": "The current istio version in the AKS cluster as CSV, will need to change to array once tooling is ready",
              "type": "string",
              "pattern": "^[a-zA-Z0-9-]+(,[a-zA-Z0-9-]+)*$"
            },
            "targetVersion": {
              "description": "The target istio version that will be updated to",
              "type": "string",
              "pattern": "^[a-zA-Z0-9-]+$"
            },
            "ingressGatewayIPAddressName": {
              "type": "string"
            },
            "ingressGatewayIPAddressIPTags": {
              "$ref": "#/definitions/keyColonValueCSV"
            }
          },
          "additionalProperties": false,
          "required": [
            "ingressGatewayIPAddressName"
          ]
        },
        "prometheus": {
          "description": "Prometheus deployment configuration",
          "$ref": "#/definitions/prometheus"
        }
      },
      "additionalProperties": false,
      "required": [
        "rg",
        "subscription",
        "aks",
        "istio"
      ]
    },
    "acr": {
      "type": "object",
      "properties": {
        "svc": {
          "$ref": "#/definitions/acr"
        },
        "ocp": {
          "$ref": "#/definitions/acr"
        }
      },
      "additionalProperties": false,
      "required": [
        "svc",
        "ocp"
      ]
    },
    "releaseApprover": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "id": {
          "type": "string"
        }
      },
      "additionalProperties": false,
      "required": [
        "name",
        "id"
      ]
    },
    "administration": {
      "type": "object",
      "properties": {
        "readerGroupId": {
          "type": "string"
        },
        "releaseManagementGroupId": {
          "type": "string"
        }
      },
      "additionalProperties": false,
      "required": [
        "readerGroupId",
        "releaseManagementGroupId"
      ]
    },
    "keyVaultDNSSuffix": {
      "type": "string"
    },
    "acrDNSSuffix": {
      "type": "string",
      "description": "The DNS suffix for Azure Container Registry (e.g., azurecr.io, azurecr.us, azurecr.cn)"
    },
    "e2e": {
      "type": "object",
      "properties": {
        "prow": {
          "type": "object",
          "properties": {
            "globalKeyVaultTokenSecret": {
              "type": "string",
              "description": "The name of the KeyVault secret in the global AKV that stores the token used to authenticate with Prow."
            }
          }
        },
        "regionTest": {
          "type": "object",
          "properties": {
            "prowJobName": {
              "type": "string"
            },
            "gatePromotion": {
              "type": "boolean"
            }
          },
          "required": [
            "prowJobName",
            "gatePromotion"
          ]
        }
      },
      "additionalProperties": false,
      "required": [
        "prow",
        "regionTest"
      ]
    },
    "automationDryRun": {
      "type": "boolean",
      "description": "Whether automation account runs in dry-run mode"
    }
  },
  "additionalProperties": false,
  "required": [
    "administration",
    "azureGeoShortId",
    "kvCertOfficerPrincipalId",
    "backplaneAPI",
    "clustersService",
    "cxKeyVault",
    "firstPartyAppClientId",
    "firstPartyAppCertificate",
    "frontend",
    "global",
    "hypershift",
    "imageSync",
    "acrPull",
    "secretSyncController",
    "maestro",
    "mgmt",
    "mgmtKeyVault",
    "monitoring",
    "msiKeyVault",
    "oidc",
    "region",
    "regionRG",
    "regionBuildout",
    "serviceKeyVault",
    "svc",
    "msiRp",
    "msiCredentialsRefresher",
    "keyVaultDNSSuffix",
    "acrDNSSuffix",
    "e2e"
  ]
}