apiVersion: v1
kind: ConfigMap
metadata:
  name: aro-hcp-ocp-versions-config
  namespace: '{{ .Release.Namespace }}'
data:
  aro-hcp-ocp-versions-config.yaml: |
    defaultVersion:
      channelGroupName: {{ .Values.ocpVersions.defaultVersion.channelGroupName }}
      version: {{ .Values.ocpVersions.defaultVersion.version }}
    channelGroups:
      {{- range .Values.ocpVersions.channelGroups }}
      # the URL to cincinnati will be the same across all environments, other URLs also need to be whitelisted
      - url: {{ .url }}
        channelGroupName: {{ .channelGroupName }}
        # the versions must be in sync with what's defined in dev-infrastructure/templates/global-image-sync.bicep
        # this is to ensure that the enabled release images are synchronized to ACR in lockstep
        minVersion: {{ .minVersion }}
        # maxVersion is exclusive, contrary to oc-mirror which defines that boundary as inclusive.
        maxVersion: {{ .maxVersion }}
      {{- end }}
